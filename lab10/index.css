:root {
    --t1: .2s;
    --t2: 1s;
    --t3: .1s;
    --t4: .2s;
    --t5: .5s;
    --t6: 1s;
    --z-light: 20;
    --z-obj: 10;
    --z-lamp: 15;
    --z-cap: 30;
}

* {
    box-sizing: border-box
}

html,
body {
    height: 100%
}

body {
    margin: 0;
    overflow: hidden;
    background: #000;
    font-family: system-ui, Arial, sans-serif
}

#light{
    z-index: 5000;
}

/* занавес как было */
.curtain {
    position: fixed;
    inset: 0;
    background: url("1.jpg") no-repeat center bottom;
    background-size: auto 100vh;
    transform: translateY(0);
    transition: transform var(--t1) ease;
    cursor: pointer
}

.curtain:hover {
    transform: translateY(-5%)
}

.curtain.is-open {
    transition: transform var(--t2) ease;
    transform: translateY(-100%);
    pointer-events: none
}

/* сцена */
.stage {
    position: relative;
    height: 100vh;
    width: 100vw;
    opacity: 1;
    transition: opacity var(--t6) ease
}

.hidden {
    opacity: 0;
    pointer-events: none
}

/* лампа */
.lamp {
    position: absolute;
    left: 50%;
    top: 6vh;
    transform: translateX(-50%);
    background: none;
    border: 0;
    padding: 0;
    cursor: pointer;
    outline: none;
    z-index: var(--z-lamp)
}

.lamp__img {
    display: block;
    height: 22vh;
    width: auto;
    pointer-events: none;
    position: relative;
    z-index: var(--z-lamp)
}

.lamp__cap {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: -1.6vh;
    width: 12vh;
    height: 5vh;
    background: transparent;
    z-index: var(--z-cap);
    pointer-events: none
}

.lamp__pull {
    position: absolute;
    left: 58px;
    top: 6.2vh;
    transform: translateX(3.4vh);
    width: .3vh;
    height: 5vh;
    background: linear-gradient(#cbb, #999);
    border-radius: .3vh;
    transition: transform var(--t3);
    z-index: var(--z-cap);
    pointer-events: none
}

.lamp:active .lamp__pull,
.lamp.pressed .lamp__pull {
    transform: translateX(3.4vh) translateY(2.2vh)
}

/* свет-треугольник, полупрозрачный, выше всего кроме верхушки */
.light {
    position: absolute;
    left: 50%;
    top: 12vh;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 26vw solid transparent;
    border-right: 26vw solid transparent;
    border-bottom: 70vh solid rgba(255, 255, 0, .5);
    opacity: 0;
    transition: opacity var(--t4);
    z-index: var(--z-light);
    pointer-events: none
}

.light.on {
    opacity: .999
}

/* объекты сцены */
.witch {
    position: absolute;
    left: 22vw;
    bottom: 11vh;
    height: 28vh;
    width: auto;
    opacity: .85;
    z-index: var(--z-obj);
    user-select: none;
    pointer-events: none
}

.hat {
    position: absolute;
    right: 22vw;
    bottom: 5vh;
    height: 20vh;
    width: auto;
    z-index: var(--z-obj);
    transform: scaleY(-1);
    z-index: 1000;
}

.rabbit,
.bird {
    position: absolute;
    background: none;
    border: 0;
    padding: 0;
    cursor: pointer;
    z-index: var(--z-obj)
}

.rabbit img,
.bird img {
    display: block;
    width: auto;
    height: 14vh
}

.rabbit {
    right: 26vw;
    bottom: 30.5vh;
    transition: transform var(--t5), opacity var(--t5)
}

.rabbit.is-hidden {
    transform: translateY(22vh);
    opacity: 0;
    pointer-events: none
}

.bird {
    right: 28.5vw;
    bottom: 30.5vh;
    transform: translateY(22vh);
    opacity: 0;
    pointer-events: none;
    transition: transform var(--t5), opacity var(--t5)
}

.bird.is-shown {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto
}

/* когда свет выключен – всё, кроме верхушки лампы, исчезает */
.stage.dark .witch,
.stage.dark .hat,
.stage.dark .rabbit,
.stage.dark .bird {
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--t4)
}